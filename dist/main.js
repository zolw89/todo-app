(()=>{const e=document.querySelector(".tasks"),t=JSON.parse(localStorage.getItem("todos"))||[{category:"Not categorized",tasks:[]}];let o="Not categorized";console.log(o),t.forEach((e=>{e.tasks.forEach((t=>{"banan"===t&&console.log(t,e.category)}))}));let c=[];const r=e=>(c=[],t.filter((t=>{t.category===e&&t.tasks.forEach((e=>c.push(e)))})),c);r(o);const d=t=>{e.innerHTML="",a.innerHTML=t,a.id=t,console.log(c),c.forEach((t=>{const o=document.createElement("div");o.textContent=t,e.appendChild(o)}))},n=document.querySelector(".projects-list"),s=()=>{n.innerHTML="",t.forEach((e=>{const t=document.createElement("li");t.className="projectItem",t.id=e.category,t.textContent=e.category,n.appendChild(t)}))},a=document.querySelector(".projectTitle"),l=()=>{document.querySelectorAll(".projectItem").forEach((t=>t.addEventListener("click",(t=>{e.innerHTML="",o=t.target.id,r(o),a.innerHTML=t.target.id,a.id=t.target.id,e.id=t.target.id,c.forEach((t=>{const o=document.createElement("div");o.textContent=t,e.appendChild(o)}))}))))},i=document.querySelector(".add-task"),u=document.querySelector("#input-div"),m=document.querySelector(".cancel-btn"),g=document.querySelector(".addBtn"),y=document.querySelector(".task-title");document.querySelector(".form-task"),document.querySelector(".tasks"),i.addEventListener("click",(e=>{e.target.classList.add("hide"),u.classList.remove("hide")})),g.addEventListener("click",(c=>{c.preventDefault(),""!==y.value&&(i.classList.remove("hide"),u.classList.add("hide"),((e,o="Not categorized")=>{for(let c=0;c<t.length;c++)if(t[c].category===o){if(t[c].tasks.find((t=>t===e))===e)return;t[c].tasks.push(e),localStorage.setItem("todos",JSON.stringify(t))}})(y.value,e.id),d(o),h())})),m.addEventListener("click",(()=>{i.classList.remove("hide"),u.classList.add("hide")}));const h=()=>{document.querySelector("form").reset()},L=document.querySelector(".add-new"),S=document.querySelector("#input-project"),v=document.querySelector(".cancel-project-btn"),p=document.querySelector(".addProjectBtn"),f=document.querySelector(".project-title");document.querySelector(".form-project"),L.addEventListener("click",(e=>{e.target.classList.add("hide"),S.classList.remove("hide")})),p.addEventListener("click",(e=>{""!==f.value&&(L.classList.remove("hide"),S.classList.add("hide"),(e=>{const o={category:e,tasks:[]};!0!==((e,t)=>{for(let o=0;o<t.length;o++)if(t[o].category===e)return!0;return!1})(e,t)&&(t.push(o),localStorage.setItem("todos",JSON.stringify(t)),s())})(f.value),renderProject(),l(),h())})),v.addEventListener("click",(()=>{L.classList.remove("hide"),S.classList.add("hide")})),document.querySelector("h1").addEventListener("click",(()=>{console.log(o),console.log(c)})),d(o),s(),l(),console.log(t)})();